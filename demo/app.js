/*jshint undef: false, unused: false, indent: 2*/
/*global angular: false */

'use strict';

var app = angular.module('demoApp', ['multi-select-tree']);

app.controller('demoAppCtrl', function ($scope) {

  var data1 = [];

  for (var i = 0; i < 7; i++) {
    var obj = {
      id: i,
      name: 'Node ' + i,
      children: []
    };

    for (var j = 0; j < 3; j++) {
      var obj2 = {
        id: j,
        name: 'Node ' + i + '.' + j,
        children: []
      };
      obj.children.push(obj2);
    }

    data1.push(obj);
  }

  data1[1].children[0].children.push({
    id: j,
    name: 'Node sub_sub 1',
    children: [],
    selected: true
  });
  var items = [{"id":"10","text":"Energy","groups":[{"id":"1010","sector":"10","text":"Energy","industries":[{"id":"101010","group":"1010","text":"Energy Equipment & Services","subIndustries":[{"id":"10101010","industry":"101010","text":"Oil & Gas Drilling"},{"id":"10101020","industry":"101010","text":"Oil & Gas Equipment & Services"}]},{"id":"101020","group":"1010","text":"Oil, Gas & Consumable Fuels","subIndustries":[{"id":"10102010","industry":"101020","text":"Integrated Oil & Gas"},{"id":"10102020","industry":"101020","text":"Oil & Gas Exploration & Production"},{"id":"10102030","industry":"101020","text":"Oil & Gas Refining & Marketing"},{"id":"10102040","industry":"101020","text":"Oil & Gas Storage & Transportation"},{"id":"10102050","industry":"101020","text":"Coal & Consumable Fuels"}]}]}]},{"id":"15","text":"Materials","groups":[{"id":"1510","sector":"15","text":"Materials","industries":[{"id":"151010","group":"1510","text":"Chemicals","subIndustries":[{"id":"15101010","industry":"151010","text":"Commodity Chemicals"},{"id":"15101020","industry":"151010","text":"Diversified Chemicals"},{"id":"15101030","industry":"151010","text":"Fertilizers & Agricultural Chemicals"},{"id":"15101040","industry":"151010","text":"Industrial Gases"},{"id":"15101050","industry":"151010","text":"Specialty Chemicals"}]},{"id":"151020","group":"1510","text":"Construction Materials","subIndustries":[{"id":"15102010","industry":"151020","text":"Construction Materials"}]},{"id":"151030","group":"1510","text":"Containers & Packaging","subIndustries":[{"id":"15103010","industry":"151030","text":"Metal & Glass Containers"},{"id":"15103020","industry":"151030","text":"Paper Packaging"}]},{"id":"151040","group":"1510","text":"Metals & Mining","subIndustries":[{"id":"15104010","industry":"151040","text":"Aluminum"},{"id":"15104020","industry":"151040","text":"Diversified Metals & Mining"},{"id":"15104030","industry":"151040","text":"Gold"},{"id":"15104040","industry":"151040","text":"Precious Metals & Minerals"},{"id":"15104050","industry":"151040","text":"Steel"}]},{"id":"151050","group":"1510","text":"Paper & Forest Products","subIndustries":[{"id":"15105010","industry":"151050","text":"Forest Products"},{"id":"15105020","industry":"151050","text":"Paper Products"}]}]}]},{"id":"20","text":"Industrials","groups":[{"id":"2010","sector":"20","text":"Capital Goods","industries":[{"id":"201010","group":"2010","text":"Aerospace & Defense","subIndustries":[{"id":"20101010","industry":"201010","text":"Aerospace & Defense"}]},{"id":"201020","group":"2010","text":"Building Products","subIndustries":[{"id":"20102010","industry":"201020","text":"Building Products"}]},{"id":"201030","group":"2010","text":"Construction & Engineering","subIndustries":[{"id":"20103010","industry":"201030","text":"Construction & Engineering"}]},{"id":"201040","group":"2010","text":"Electrical Equipment","subIndustries":[{"id":"20104010","industry":"201040","text":"Electrical Components & Equipment"},{"id":"20104020","industry":"201040","text":"Heavy Electrical Equipment"}]},{"id":"201050","group":"2010","text":"Industrial Conglomerates","subIndustries":[{"id":"20105010","industry":"201050","text":"Industrial Conglomerates"}]},{"id":"201060","group":"2010","text":"Machinery","subIndustries":[{"id":"20106010","industry":"201060","text":"Construction & Farm Machinery & Heavy Trucks"},{"id":"20106020","industry":"201060","text":"Industrial Machinery"}]},{"id":"201070","group":"2010","text":"Trading Companies & Distributors","subIndustries":[{"id":"20107010","industry":"201070","text":"Trading Companies & Distributors"}]}]},{"id":"2020","sector":"20","text":"Commercial & Professional Services","industries":[{"id":"202010","group":"2020","text":"Commercial Services & Supplies","subIndustries":[{"id":"20201010","industry":"202010","text":"Commercial Printing"},{"id":"20201050","industry":"202010","text":"Environmental & Facilities Services"},{"id":"20201060","industry":"202010","text":"Office Services & Supplies"},{"id":"20201070","industry":"202010","text":"Diversified Support Services"},{"id":"20201080","industry":"202010","text":"Security & Alarm Services"}]},{"id":"202020","group":"2020","text":"Professional Services","subIndustries":[{"id":"20202010","industry":"202020","text":"Human Resource & Employment Services"},{"id":"20202020","industry":"202020","text":"Research & Consulting Services"}]}]},{"id":"2030","sector":"20","text":"Transportation","industries":[{"id":"203010","group":"2030","text":"Air Freight & Logistics","subIndustries":[{"id":"20301010","industry":"203010","text":"Air Freight & Logistics"}]},{"id":"203020","group":"2030","text":"Airlines","subIndustries":[{"id":"20302010","industry":"203020","text":"Airlines"}]},{"id":"203030","group":"2030","text":"Marine","subIndustries":[{"id":"20303010","industry":"203030","text":"Marine"}]},{"id":"203040","group":"2030","text":"Road & Rail","subIndustries":[{"id":"20304010","industry":"203040","text":"Railroads"},{"id":"20304020","industry":"203040","text":"Trucking"}]},{"id":"203050","group":"2030","text":"Transportation Infrastructure","subIndustries":[{"id":"20305010","industry":"203050","text":"Airport Services"},{"id":"20305020","industry":"203050","text":"Highways & Railtracks"},{"id":"20305030","industry":"203050","text":"Marine Ports & Services"}]}]}]},{"id":"25","text":"Consumer Discretionary","groups":[{"id":"2510","sector":"25","text":"Automobiles & Components","industries":[{"id":"251010","group":"2510","text":"Auto Components","subIndustries":[{"id":"25101010","industry":"251010","text":"Auto Parts & Equipment"},{"id":"25101020","industry":"251010","text":"Tires & Rubber"}]},{"id":"251020","group":"2510","text":"Automobiles","subIndustries":[{"id":"25102010","industry":"251020","text":"Automobile Manufacturers"},{"id":"25102020","industry":"251020","text":"Motorcycle Manufacturers"}]}]},{"id":"2520","sector":"25","text":"Consumer Durables & Apparel","industries":[{"id":"252010","group":"2520","text":"Household Durables","subIndustries":[{"id":"25201010","industry":"252010","text":"Consumer Electronics"},{"id":"25201020","industry":"252010","text":"Home Furnishings"},{"id":"25201030","industry":"252010","text":"Homebuilding"},{"id":"25201040","industry":"252010","text":"Household Appliances"},{"id":"25201050","industry":"252010","text":"Housewares & Specialties"}]},{"id":"252020","group":"2520","text":"Leisure Equipment & Products","subIndustries":[{"id":"25202010","industry":"252020","text":"Leisure Products"},{"id":"25202020","industry":"252020","text":"Photographic Products"}]},{"id":"252030","group":"2520","text":"Textiles, Apparel & Luxury Goods","subIndustries":[{"id":"25203010","industry":"252030","text":"Apparel, Accessories & Luxury Goods"},{"id":"25203020","industry":"252030","text":"Footwear"},{"id":"25203030","industry":"252030","text":"Textiles"}]}]},{"id":"2530","sector":"25","text":"Consumer Services","industries":[{"id":"253010","group":"2530","text":"Hotels, Restaurants & Leisure","subIndustries":[{"id":"25301010","industry":"253010","text":"Casinos & Gaming"},{"id":"25301020","industry":"253010","text":"Hotels, Resorts & Cruise Lines"},{"id":"25301030","industry":"253010","text":"Leisure Facilities"},{"id":"25301040","industry":"253010","text":"Restaurants"}]},{"id":"253020","group":"2530","text":"Diversified Consumer Services","subIndustries":[{"id":"25302010","industry":"253020","text":"Education Services"},{"id":"25302020","industry":"253020","text":"Specialized Consumer Services"}]}]},{"id":"2540","sector":"25","text":"Media","industries":[{"id":"254010","group":"2540","text":"Media","subIndustries":[{"id":"25401010","industry":"254010","text":"Advertising"},{"id":"25401020","industry":"254010","text":"Broadcasting"},{"id":"25401025","industry":"254010","text":"Cable & Satellite"},{"id":"25401030","industry":"254010","text":"Movies & Entertainment"},{"id":"25401040","industry":"254010","text":"Publishing"}]}]},{"id":"2550","sector":"25","text":"Retailing","industries":[{"id":"255010","group":"2550","text":"Distributors","subIndustries":[{"id":"25501010","industry":"255010","text":"Distributors"}]},{"id":"255020","group":"2550","text":"Internet & Catalog Retail","subIndustries":[{"id":"25502010","industry":"255020","text":"Catalog Retail"},{"id":"25502020","industry":"255020","text":"Internet Retail"}]},{"id":"255030","group":"2550","text":"Multiline Retail","subIndustries":[{"id":"25503010","industry":"255030","text":"Department Stores"},{"id":"25503020","industry":"255030","text":"General Merchandise Stores"}]},{"id":"255040","group":"2550","text":"Specialty Retail","subIndustries":[{"id":"25504010","industry":"255040","text":"Apparel Retail"},{"id":"25504020","industry":"255040","text":"Computer & Electronics Retail"},{"id":"25504030","industry":"255040","text":"Home Improvement Retail"},{"id":"25504040","industry":"255040","text":"Specialty Stores"},{"id":"25504050","industry":"255040","text":"Automotive Retail"},{"id":"25504060","industry":"255040","text":"Homefurnishing Retail"}]}]}]},{"id":"30","text":"Consumer Staples","groups":[{"id":"3010","sector":"30","text":"Food & Staples Retailing","industries":[{"id":"301010","group":"3010","text":"Food & Staples Retailing","subIndustries":[{"id":"30101010","industry":"301010","text":"Drug Retail"},{"id":"30101020","industry":"301010","text":"Food Distributors"},{"id":"30101030","industry":"301010","text":"Food Retail"},{"id":"30101040","industry":"301010","text":"Hypermarkets & Super Centers"}]}]},{"id":"3020","sector":"30","text":"Food, Beverage & Tobacco","industries":[{"id":"302010","group":"3020","text":"Beverages","subIndustries":[{"id":"30201010","industry":"302010","text":"Brewers"},{"id":"30201020","industry":"302010","text":"Distillers & Vintners"},{"id":"30201030","industry":"302010","text":"Soft Drinks"}]},{"id":"302020","group":"3020","text":"Food Products","subIndustries":
  [{"id":"30202010","industry":"302020","text":"Agricultural Products"},{"id":"30202030","industry":"302020","text":"Packaged Foods & Meats"}]},{"id":"302030","group":"3020","text":"Tobacco","subIndustries":[{"id":"30203010","industry":"302030","text":"Tobacco"}]}]},{"id":"3030","sector":"30","text":"Household & Personal Products","industries":[{"id":"303010","group":"3030","text":"Household Products","subIndustries":[{"id":"30301010","industry":"303010","text":"Household Products"}]},{"id":"303020","group":"3030","text":"Personal Products","subIndustries":[{"id":"30302010","industry":"303020","text":"Personal Products"}]}]}]},{"id":"35","text":"Health Care","groups":[{"id":"3510","sector":"35","text":"Health Care Equipment & Services","industries":[{"id":"351010","group":"3510","text":"Health Care Equipment & Supplies","subIndustries":[{"id":"35101010","industry":"351010","text":"Health Care Equipment"},{"id":"35101020","industry":"351010","text":"Health Care Supplies"}]},{"id":"351020","group":"3510","text":"Health Care Providers & Services","subIndustries":[{"id":"35102010","industry":"351020","text":"Health Care Distributors"},{"id":"35102015","industry":"351020","text":"Health Care  Services"},{"id":"35102020","industry":"351020","text":"Health Care Facilities"},{"id":"35102030","industry":"351020","text":"Managed Health Care"}]},{"id":"351030","group":"3510","text":"Health Care Technology","subIndustries":[{"id":"35103010","industry":"351030","text":"Health Care Technology"}]}]},{"id":"3520","sector":"35","text":"Pharmaceuticals, Biotechnology & Life Sciences","industries":[{"id":"352010","group":"3520","text":"Biotechnology","subIndustries":[{"id":"35201010","industry":"352010","text":"Biotechnology"}]},{"id":"352020","group":"3520","text":"Pharmaceuticals","subIndustries":[{"id":"35202010","industry":"352020","text":"Pharmaceuticals"}]},{"id":"352030","group":"3520","text":"Life Sciences Tools & Services","subIndustries":[{"id":"35203010","industry":"352030","text":"Life Sciences Tools & Services"}]}]}]},{"id":"40","text":"Financials","groups":[{"id":"4010","sector":"40","text":"Banks","industries":[{"id":"401010","group":"4010","text":"Commercial Banks","subIndustries":[{"id":"40101010","industry":"401010","text":"Diversified Banks"},{"id":"40101015","industry":"401010","text":"Regional Banks"}]},{"id":"401020","group":"4010","text":"Thrifts & Mortgage Finance","subIndustries":[{"id":"40102010","industry":"401020","text":"Thrifts & Mortgage Finance"}]}]},{"id":"4020","sector":"40","text":"Diversified Financials","industries":[{"id":"402010","group":"4020","text":"Diversified Financial Services","subIndustries":[{"id":"40201020","industry":"402010","text":"Other Diversified Financial Services"},{"id":"40201030","industry":"402010","text":"Multi-Sector Holdings"},{"id":"40201040","industry":"402010","text":"Specialized Finance"}]},{"id":"402020","group":"4020","text":"Consumer Finance","subIndustries":[{"id":"40202010","industry":"402020","text":"Consumer Finance"}]},{"id":"402030","group":"4020","text":"Capital Markets","subIndustries":[{"id":"40203010","industry":"402030","text":"Asset Management & Custody Banks"},{"id":"40203020","industry":"402030","text":"Investment Banking & Brokerage"},{"id":"40203030","industry":"402030","text":"Diversified Capital Markets"}]}]},{"id":"4030","sector":"40","text":"Insurance","industries":[{"id":"403010","group":"4030","text":"Insurance","subIndustries":[{"id":"40301010","industry":"403010","text":"Insurance Brokers"},{"id":"40301020","industry":"403010","text":"Life & Health Insurance"},{"id":"40301030","industry":"403010","text":"Multi-line Insurance"},{"id":"40301040","industry":"403010","text":"Property & Casualty Insurance"},{"id":"40301050","industry":"403010","text":"Reinsurance"}]}]},{"id":"4040","sector":"40","text":"Real Estate","industries":[{"id":"404020","group":"4040","text":"Real Estate Investment Trusts (REITs)","subIndustries":[{"id":"40402010","industry":"404020","text":"Diversified REIT's"},{"id":"40402020","industry":"404020","text":"Industrial REIT's"},{"id":"40402030","industry":"404020","text":"Mortgage REIT's"},{"id":"40402040","industry":"404020","text":"Office REIT's"},{"id":"40402050","industry":"404020","text":"Residential REIT's"},{"id":"40402060","industry":"404020","text":"Retail REIT's"},{"id":"40402070","industry":"404020","text":"Specialized REIT's"}]},{"id":"404030","group":"4040","text":"Real Estate Management & Development","subIndustries":[{"id":"40403010","industry":"404030","text":"Diversified Real Estate Activities"},{"id":"40403020","industry":"404030","text":"Real Estate Operating Companies"},{"id":"40403030","industry":"404030","text":"Real Estate Development"},{"id":"40403040","industry":"404030","text":"Real Estate Services"}]}]}]},{"id":"45","text":"Information Technology","groups":[{"id":"4510","sector":"45","text":"Software & Services","industries":[{"id":"451010","group":"4510","text":"Internet Software & Services","subIndustries":[{"id":"45101010","industry":"451010","text":"Internet Software & Services"}]},{"id":"451020","group":"4510","text":"IT Services","subIndustries":[{"id":"45102010","industry":"451020","text":"IT Consulting & Other Services"},{"id":"45102020","industry":"451020","text":"Data Processing & Outsourced Services"}]},{"id":"451030","group":"4510","text":"Software","subIndustries":[{"id":"45103010","industry":"451030","text":"Application Software"},{"id":"45103020","industry":"451030","text":"Systems Software"},{"id":"45103030","industry":"451030","text":"Home Entertainment Software"}]}]},{"id":"4520","sector":"45","text":"Technology Hardware & Equipment","industries":[{"id":"452010","group":"4520","text":"Communications Equipment","subIndustries":[{"id":"45201020","industry":"452010","text":"Communications Equipment"}]},{"id":"452020","group":"4520","text":"Computers & Peripherals","subIndustries":[{"id":"45202010","industry":"452020","text":"Computer Hardware"},{"id":"45202020","industry":"452020","text":"Computer Storage & Peripherals"}]},{"id":"452030","group":"4520","text":"Electronic Equipment, Instruments & Components","subIndustries":[{"id":"45203010","industry":"452030","text":"Electronic Equipment & Instruments"},{"id":"45203015","industry":"452030","text":"Electronic Components"},{"id":"45203020","industry":"452030","text":"Electronic Manufacturing Services"},{"id":"45203030","industry":"452030","text":"Technology Distributors"}]},{"id":"452040","group":"4520","text":"Office Electronics","subIndustries":[{"id":"45204010","industry":"452040","text":"Office Electronics"}]}]},{"id":"4530","sector":"45","text":"Semiconductors & Semiconductor Equipment","industries":[{"id":"453010","group":"4530","text":"Semiconductors & Semiconductor Equipment","subIndustries":[{"id":"45301010","industry":"453010","text":"Semiconductor Equipment"},{"id":"45301020","industry":"453010","text":"Semiconductors"}]}]}]},{"id":"50","text":"Telecommunication Services","groups":[{"id":"5010","sector":"50","text":"Telecommunication Services","industries":[{"id":"501010","group":"5010","text":"Diversified Telecommunication Services","subIndustries":[{"id":"50101010","industry":"501010","text":"Alternative Carriers"},{"id":"50101020","industry":"501010","text":"Integrated Telecommunication Services"}]},{"id":"501020","group":"5010","text":"Wireless Telecommunication Services","subIndustries":[{"id":"50102010","industry":"501020","text":"Wireless Telecommunication Services"}]}]}]},{"id":"55","text":"Utilities","groups":[{"id":"5510","sector":"55","text":"Utilities","industries":[{"id":"551010","group":"5510","text":"Electric Utilities","subIndustries":[{"id":"55101010","industry":"551010","text":"Electric Utilities"}]},{"id":"551020","group":"5510","text":"Gas Utilities","subIndustries":[{"id":"55102010","industry":"551020","text":"Gas Utilities"}]},{"id":"551030","group":"5510","text":"Multi-Utilities","subIndustries":[{"id":"55103010","industry":"551030","text":"Multi-Utilities"}]},{"id":"551040","group":"5510","text":"Water Utilities","subIndustries":[{"id":"55104010","industry":"551040","text":"Water Utilities"}]},{"id":"551050","group":"5510","text":"Independent Power Producers & Energy Traders","subIndustries":[{"id":"55105010","industry":"551050","text":"Independent Power Producers & Energy Traders"}]}]}]},{"id":"60","text":"Real Estate","groups":[{"id":"6010","sector":"60","text":"Real Estate","industries":[{"id":"601010","group":"6010","text":"Equity Real Estate Investment Trusts (REITs)","subIndustries":[{"id":"60101010","industry":"601010","text":"Diversified REITs"},{"id":"60101020","industry":"601010","text":"Industrial REITs"},{"id":"60101030","industry":"601010","text":"Hotel & Resort REITs"},{"id":"60101040","industry":"601010","text":"Office REITs"},{"id":"60101050","industry":"601010","text":"Health Care REITs"},{"id":"60101060","industry":"601010","text":"Residential REITs"},{"id":"60101070","industry":"601010","text":"Retail REITs"},{"id":"60101080","industry":"601010","text":"Specialized REITs"}]},{"id":"601020","group":"6010","text":"Real Estate Management & Development","subIndustries":[{"id":"60102010","industry":"601020","text":"Diversified Real Estate Activities"},{"id":"60102020","industry":"601020","text":"Real Estate Operating Companies"},{"id":"60102030","industry":"601020","text":"Real Estate Development"},{"id":"60102040","industry":"601020","text":"Real Estate Services"}]}]}]}]
  function mapGics(items) {
    if (!items.length)
        return null;
    return items.map(function (item) {
        return {
            id: item.id,
            name: item.id +' '+ item.text,
            children: mapGics(item.groups || item.industries || item.subIndustries || []) || []
        };

    })
}
$scope.data = mapGics(items);
  

  var data3 = [];

  for (var i = 0; i < 7; i++) {
    var obj3 = {
      id: i,
      name: 'Node new view ' + i
    };
    data3.push(obj3);
  }


    $scope.selectOnly1Or2 = function(item, selectedItems) {
    if (selectedItems  !== undefined && selectedItems.length >= 20) {
      return false;
    } else {
      return true;
    }
  };

  $scope.switchViewCallback = function(scopeObj) {

    if (scopeObj.switchViewLabel == 'test2') {
      scopeObj.switchViewLabel = 'test1';
      scopeObj.inputModel = data1;
      scopeObj.selectOnlyLeafs = true;
    } else {
      scopeObj.switchViewLabel = 'test2';
      scopeObj.inputModel = data3;
      scopeObj.selectOnlyLeafs = false;
    }
  }
});